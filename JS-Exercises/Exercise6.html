<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
		<script src="./jquery-1.4.2.min.js"></script>
		<script src="./rx.js" type="text/javascript"></script>
		<script src="./rx.jquery.js" type="text/javascript"></script>
		<script type="text/javascript"> 
			function searchWikipedia(term) { 
				return $.ajaxAsObservable({
					url: "http://en.wikipedia.org/w/api.php", 
					dataType: "jsonp", 
					data: { 
						action: "opensearch", 
						search: term, 
						format: "json" 
						}
					})
					.Select(function (d) { return d.data[1]; });
				}
				
			var input = "reactive";	
			var makeRequest = function(len) {
				var req = input.substring(0, len);
				searchWikipedia(req)
					//.Delay(Math.random() * 10000)
					.Subscribe(
					function (results) {
						$("#results").append("<li>" + req + " -> " + results.length + "</li>");
					},
					function (exn) {
						$("#error").text(error);
					});
			};
			
			for (var len = 3; len <= input.length; len++) {
				makeRequest(len);
			}
		


		</script>

</head>
<body> 
	<input id="textbox" type="text" size="100" />
	<br />
	<p id="content" />
	<ul id="results" />
	<p id="error" />
</body>
</html>

